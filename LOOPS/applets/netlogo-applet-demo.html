<html>
  <head>
    <title>Netlogo applet</title>
  </head>
  <body>
    <h1>Netlogo applet</h1>
    <div>
      <applet id="applet" code="org.concord.otrunk.applet.OTAppletViewer"
width="1350" height="700" codebase="http://jnlp.concord.org/dev2/"
archive="
org/concord/otrunk-nlogo41/otrunk-nlogo41-0.1.0-20110223.200651-425.jar,
org/concord/framework/framework-0.1.0-20110223.195232-574.jar,
org/concord/loader/loader-0.1.0-20101111.173746-319.jar,
org/concord/data/data-0.2.0-20110223.195441-314.jar,
org/concord/swing/swing-0.1.0-20110101.050037-396.jar,
org/concord/otrunk/otrunk-0.3.0-20110223.200140-36.jar,
org/concord/frameworkview/frameworkview-0.1.0-20110223.195340-418.jar,
org/concord/apple-support/apple-support-0.1.0-20101111.173736-326.jar,
org/concord/utilities/response-cache/response-cache-0.1.0-20110101.051026-218.jar,
org/concord/nlogo/netlogo4/netlogo4-4.1.2-20110207b.jar,
org/concord/datagraph/datagraph-0.2.0-20110223.200414-374.jar,
org/concord/graphutil/graphutil-0.1.0-20110223.195608-580.jar,
org/concord/graph/graph-0.1.0-20100914.140203-348.jar,
org/concord/otrunk-ui/otrunk-ui-0.1.0-20110223.200848-1056.jar,
asm/asm/asm-3.1.jar,
asm/asm-commons/asm-commons-3.1.jar,
asm/asm-tree/asm-tree-3.1.jar,
asm/asm-util/asm-util-3.1.jar,
jug/jug/jug-1.1.2.jar,
jdom/jdom/jdom-1.0.jar,
log4j/log4j/log4j-1.2.15.jar,
javax/mail/mail/mail-1.4.jar,
javax/activation/activation/activation-1.1.jar,
javax/jms/jms/jms-1.1.jar,
com/sun/jdmk/jmxtools/jmxtools-1.2.1.jar,
com/sun/jmx/jmxri/jmxri-1.2.1.jar,
net/java/dev/jogl/jogl/jogl-1.1.1-rc6.jar,
net/java/dev/gluegen/gluegen-rt/gluegen-rt-1.0b05.jar,
javax/media/jmf/jmf-2.1.1e.jar,
org/scala-lang/scala-library/scala-library-2.7.7.jar,
org/swinglabs/swing-layout/swing-layout-1.0.3.jar,
org/picocontainer/picocontainer/picocontainer-2.9.jar,
org/concord/external/jhotdraw/jhotdraw-6.0.jar,
org/concord/external/BehaviorSpace/BehaviorSpace-1.0.jar,
org/concord/external/sound/jlayer/jlayer-1.0.jar,
org/concord/external/sound/mp3spi/mp3spi-1.9.4.jar,
org/concord/external/sound/tritonus/tritonus-0.1.jar,
org/concord/external/ekit/ekit-1.0.jar
">
  <param name="url" value="netlogo-applet.otml"/>
  <param name="name" value="nlogo_model"/>
        Your browser is completely ignoring the applet tag!
      </applet> 
    </div>
    <div>
      <script type="text/javascript">
        function how_many() {
        	var applet = document.getElementById("applet"); // returns an OTAppletViewer
        	
        	// interact with the objects defined by the netlogo-applet.otml file
        	var dataCollector = applet.getOTObject("cefe3fef-5501-11dd-9991-5952f2563061"); // returns an OTDataCollector
        	var events = dataCollector.getLog(); // returns an OTObjectList which contains OTModelEvent objects     
        	        
        	var count = 0;
        	var startTime = 0;
        	var elapsed = 0;
        	
        	for (var i = 0; i < events.size(); i++) {
        	    var event = events.get(i);
        	    var eventType = event.getType().toString();
        	    var eventTime = event.getTimestamp();
        	    
        		if (eventType === "PLAYBACK_START") {
        			count++;
        			startTime = event.getTimestamp();
        		} else if (eventType === "PLAYBACK_STOP") {
        		    var stopTime = event.getTimestamp();
        		    elapsed += (eventTime - startTime);
        		}
        	}
        	alert("Play has been clicked " + count + " times!\n" + Math.round(elapsed/1000) + " seconds was spent playing back the graph.");
        }
      </script>
      <a href="javascript:how_many();">How many times has "play" been clicked?</a>
    </div>
  </body>
</html>